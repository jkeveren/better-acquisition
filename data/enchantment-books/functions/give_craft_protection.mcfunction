recipe take @s enchantment-books:craft_protection
advancement revoke @s only enchantment-books:craft_protection_adv
clear @s minecraft:knowledge_book
give @p minecraft:enchanted_book{StoredEnchantments:[{id:protection,lvl:4}]} 1